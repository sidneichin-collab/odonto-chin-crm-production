{
  "query": "CREATE TABLE IF NOT EXISTS patients (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  clinic_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  ci VARCHAR(50),\n  phone VARCHAR(50) NOT NULL,\n  emergency_contact VARCHAR(50),\n  email VARCHAR(320),\n  birth_date DATE,\n  address TEXT,\n  ubicacion VARCHAR(255),\n  treatment_type ENUM('orthodontics', 'general_clinic', 'both') NOT NULL,\n  origin VARCHAR(100),\n  risk_level ENUM('low', 'medium', 'high') DEFAULT 'low',\n  notes TEXT,\n  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (clinic_id) REFERENCES clinics(id) ON DELETE CASCADE,\n  INDEX idx_clinic (clinic_id),\n  INDEX idx_phone (phone)\n);\n\nCREATE TABLE IF NOT EXISTS treatments (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  clinic_id INT NOT NULL,\n  patient_id INT NOT NULL,\n  treatment_type ENUM('orthodontics', 'general_clinic', 'both') NOT NULL,\n  status ENUM('active', 'completed', 'cancelled', 'on_hold') DEFAULT 'active',\n  start_date DATE,\n  estimated_end_date DATE,\n  actual_end_date DATE,\n  total_cost DECIMAL(10,2),\n  amount_paid DECIMAL(10,2) DEFAULT 0,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (clinic_id) REFERENCES clinics(id) ON DELETE CASCADE,\n  FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE\n);\n\nSELECT 'Step 1: patients and treatments tables created' as result;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3dy73aS7obdDVgV.73116cb9d21b --database Xh2xRagQAoY5NjF5TC3DfV --execute CREATE TABLE IF NOT EXISTS patients (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  clinic_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  ci VARCHAR(50),\n  phone VARCHAR(50) NOT NULL,\n  emergency_contact VARCHAR(50),\n  email VARCHAR(320),\n  birth_date DATE,\n  address TEXT,\n  ubicacion VARCHAR(255),\n  treatment_type ENUM('orthodontics', 'general_clinic', 'both') NOT NULL,\n  origin VARCHAR(100),\n  risk_level ENUM('low', 'medium', 'high') DEFAULT 'low',\n  notes TEXT,\n  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (clinic_id) REFERENCES clinics(id) ON DELETE CASCADE,\n  INDEX idx_clinic (clinic_id),\n  INDEX idx_phone (phone)\n);\n\nCREATE TABLE IF NOT EXISTS treatments (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  clinic_id INT NOT NULL,\n  patient_id INT NOT NULL,\n  treatment_type ENUM('orthodontics', 'general_clinic', 'both') NOT NULL,\n  status ENUM('active', 'completed', 'cancelled', 'on_hold') DEFAULT 'active',\n  start_date DATE,\n  estimated_end_date DATE,\n  actual_end_date DATE,\n  total_cost DECIMAL(10,2),\n  amount_paid DECIMAL(10,2) DEFAULT 0,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (clinic_id) REFERENCES clinics(id) ON DELETE CASCADE,\n  FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE\n);\n\nSELECT 'Step 1: patients and treatments tables created' as result;",
  "rows": [
    {
      "result": "Step 1: patients and treatments tables created"
    }
  ],
  "messages": [],
  "stdout": "result\nStep 1: patients and treatments tables created\n",
  "stderr": "",
  "execution_time_ms": 644
}